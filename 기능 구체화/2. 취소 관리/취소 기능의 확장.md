근데 취소 요청을 받아서 내가 처리해줄게 아니면 ㅣ... 존재의 이유가 있ㅈ나
왜냐면 지금 수준에서 취소 요청과 취소 완료 기능이 없잖어
상태가 
- 주문 완료
- 취소
- 배송완료
라면 사용자가 취소하게되면 상태가 바로 취소가 되어서 취소 관리에서는 그냥 건수 통계만 하는거 아닌가?
그것 마저도 그냥 주문 통합 검색에서 할 수 있는데?


만약에 주문 완료상태에서 사용자가 결제가 되어서 정산에 추가가 된다면 


만약 취소 요청을 처리하지 않는 기능으로 간다면ㅇ
서비스에서 `취소`란 주문이 완료 되고 배송처리가 되지 않는 상태에서 취소하여 사용자에게 주문 완료시 겨레되었던 주문이 재입금되는 방식으로 가야할듯

- 입금 완료
- 입금 전
**취소 사유** 확인: 고객 선택값 (단순 변심, 배송 지연, 결제 오류

| 상태                  | 설명                               |
| ------------------- | -------------------------------- |
| `결제 완료`             | 고객이 결제를 마친 상태. 아직 준비 전           |
| `상품 준비중` / `출고 준비중` | 재고 확인 또는 포장 중. 물류 작업 시작          |
| `출고 완료` / `배송 시작`   | 택배사에 인계되어 송장 발급된 상태              |
| `배송 중`              | 택배사 이동 중, 송장번호 추적 가능             |
| `배송 완료`             | 고객에게 수령 완료된 상태 (택배사 연동 또는 수기 확인) |

| 상태       | 설명                          |
| -------- | --------------------------- |
| `취소 요청`  | 고객이 배송 전 취소를 요청한 상태 (승인 대기) |
| `취소 완료`  | 자동/수동으로 취소 확정됨 (환불 포함)      |
| `반품 요청`  | 배송 완료 후 반품을 신청한 상태          |
| `반품 진행중` | 택배 회수 중 / 물류센터 입고 대기        |
| `반품 완료`  | 반품 입고 확인 + 환불 완료됨           |
그럼 주문테이블의 주문 상태에 위의 상태가 다 들어가는건데..

그럼 만약 취소 요청 기능을 추가한다하더라고 자바의 Enum 상수만 변경되지 테이블이 변경될 필요는 없을 거 같다.

### 그래서 만약 취소 요청-완료 로직까지 확장한다면
- 주문 통합 검색에 취소요청, 취소완료까지 조회해야하낟.
- 취소 완료일때만 재소를 업데이트해야한다.

---
1. 주문 처리 페이지에서 처리되지 않는 주문 완료 상태를 취소 or 배송 완료 처리한다.
	(배송 완료 처리하는 이유는 원래 배송 로직까지 생각해서 물건을 보내고 이런게 필요한데 그걸 생략했기 때문에 그렇게 처리)
- 배송 완료의 경우 상태값 + 수량 만 변경시킴

- 관리자가 취소할 경우
	1. 바로 취소 완료 상태 변경
	2. 재고 업데이트

- 사용자가 취소할 경우
	1. 취소 요청상태로 취소관리 페이지에서 조회 가능
	2. 관리자가 취소 요청을 수락하면 취소 완료
	3. 관리자가 취소 요청을 수락하지 않으면 계속 요청 상태



- 주문 완료
- ~~취소~~ -> <mark style="background: #FFF3A3A6;">다른 팀원들을 취소 대신에 취소 완료 상수를 사용하면 됨</mark>
- 배송 완료

- 취소 요청
- 취소 완료


---
#### 문제
가장 기본이 
1. 주문 완료
2. 배송 완료

인데 사실 결제만 된 상태, 즉 출고가 되지 않은 상태에서는 관리지가 취소 요청을 하나하나 처리할 필요 없이 자동으로 환불만 해주면 된다.

그럼 저 상태에서 취소의 기능을 취소 요청과 취소 완료로 확장한다면 , 가장 정확한 설계는 출고를 추가하는 것인데 출고에서 배송완료의 상태를 변경해주는 로직이 없기 때문에
1. 출고 전 상태에서 취소 상태만 둔다. 단, 취소관리의 기능이 필요 없어진다.
2. 취소 요청 상태와 완료 상태를 추가하여 취소 관리 기능을 살린다.
- 주문 완료 + 취소 = 취소 요청 or 취소 완료
- 배송 완료 + 취소 = 반품, 교환 로직이라 상관 없음



----

- 주문 완료 (사용)
- 출고 (나만 사용)
- 배송중 (사용 안함) (레거시)
- 배송 완료 (사용) (레거시)

- 취소 요청
- 취소 완료


- 주문 완료 상태에서 취소 요청을 하면 자동으로 환불, 취소 완료 - 안다르게 될듯 뎅터로는 그냥 바로 취소 완료로 들어가면 되지 않을까
- 출고 상태에서 취소 요청을 하면 관리자가 취소를 받고 취소 처리 - 취소 관리에서 치소 처리 필요